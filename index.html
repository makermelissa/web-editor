<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon" />
        <title>CircuitPython WebBluetooth Editor</title>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
            integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
        <link rel="stylesheet" href="assets/css/style.css">
    </head>

    <body>
        <div class="body-blackout"></div>
        <header id="site-header">
            <div class="wrapper">
                <div class="content">
                    <nav class="site-brand">
                        <div class="site-logo">
                            <a href="/">
                                <img src="assets/images/logo.png" srcset="assets/images/logo.png 1x,
                                    assets/images/logo@2x.png 2x,
                                    assets/images/logo@3x.png 3x" alt="CircuitPython Logo" height="60" width="136">
                            </a>
                        </div>
                        <div class="get-started">
                            <a href="#!" id="connectToBluetoothDevices">Connect</a>
                        </div>
                    </nav>
                </div>
            </div>
            <div class="bottom-bar"></div>
        </header>
        <header id="mobile-header">
            <div class="header-contents">
                <nav class="site-brand">
                    <div class="site-logo">
                        <a href="/">
                            <img src="assets/images/logo.png" srcset="assets/images/logo.png 1x,
                                    assets/images/logo@2x.png 2x,
                                    assets/images/logo@3x.png 3x" alt="CircuitPython Logo" height="40" width="91">
                        </a>
                    </div>
                    <div class="get-started">
                        <a href="#!" id="connectToBluetoothDevices">Connect</a>
                    </div>
                </nav>
            </div>
            <div class="bottom-bar"></div>
        </header>
        <div class="mode-landing" id="main-content">
            <div id="landing-page" class="wrapper">
                <div class="common-layout content">
                    <div class="container">
                        <p>If you are new here, follow the steps below. Otherwise click the Connect button in the upper
                            right.</p>
                        <section class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h1>Set Up Web Bluetooth</h1>
                                <p>
                                    Web Bluetooth is currently only supported in the Chrome browser. Click this link in
                                    Chrome to enable web Bluetooth. <a href="chrome://flags">chrome://flags</a>
                                </p>
                                <p>
                                    Then enable the following two flags:<br>
                                    <a
                                        href="chrome://flags/#enable-experimental-web-platform-features">chrome://flags/#enable-experimental-web-platform-features</a><br>
                                    <a
                                        href="chrome://flags/#enable-web-bluetooth-new-permissions-backend">chrome://flags/#enable-web-bluetooth-new-permissions-backend</a>
                                </p>
                            </div>
                        </section>
                        <section class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h1>Request Bluetooth Device</h1>
                                <p>
                                    CircuitPython boards with <a
                                        href="https://circuitpython.org/downloads?features=Bluetooth%2FBTLE">nrf chips need
                                        CircuitPython 7.0.0 or newer</a>. The first time a device is connected to your host,
                                    you'll need to enable public broadcasting by pressing reset when the faster, blue blink
                                    is happening on start up. The device will reset and the second, blue blink will be solid
                                    when done successfully.
                                </p>
                                <p>
                                    <button class="purple-button-link" id="requestBluetoothDevice">Request Bluetooth
                                        Device</button>
                                </p>
                            </div>
                        </section>
                        <section class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h1>Bond Device</h1>
                                <p>
                                    Once you are connected, we need to prompt a bond. Without this CircuitPython boards with
                                    USB won't continue to advertise after a hard reset or powerloss. This button also loads
                                    code.py from the device so click it even if the device has been connected before.
                                </p>
                                <p>
                                    <button class="purple-button-link" id="promptBond">Bond Bluetooth Device</button>
                                </p>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
            <div id="editor-page" class="wrapper">
                <div class="container">
                    <div id="mobile-editor-bar">
                        <div id="mobile-menu">
                            <div class="menu-toggle">
                                <a href="#" id="mobile-menu-button">
                                    <span class="sr-only">Open Mobile Menu</span>
                                    <i class="fa fa-bars" aria-hidden="true"></i>
                                </a>
                            </div>
                        </div>
                        <div class="file-path"></div>
                        <a class="purple-button-link btn-save-run">Save + Run<i class="fas fa-play"></i></a>
                        <div class="clear"></div>
                        <nav id="mobile-menu-contents" role="navigation" class="hidden" aria-expanded="false"
                            aria-label="Mobile Menu">
                            <ul>
                                <li><a class="btn-new">New<i class="fas fa-plus"></i></a></li>
                                <li><a class="btn-open">Open<i class="fas fa-folder-open"></i></a></li>
                                <li><a class="btn-save-as">Save As<i class="fas fa-download"></i></a></li>
                            </ul>
                        </nav>
                    </div>
                    <div id="editor-bar">
                        <a class="purple-button-link btn-new">New<i class="fas fa-plus"></i></a>
                        <a class="purple-button-link btn-open">Open<i class="fas fa-folder-open"></i></a>
                        <a class="purple-button-link btn-save-as">Save As<i class="fas fa-download"></i></a>
                        <div class="file-path"></div>
                        <a class="purple-button-link btn-save-run">Save + Run<i class="fas fa-play"></i></a>
                    </div>
                </div>
                <div>
                    <div class="editor-container">
                        <div class="container">
                            <div id="editor"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="serial-page" class="wrapper">
                <div class="container">
                    <a class="purple-button-link" id="btn-restart">Restart<i class="fas fa-redo"></i></a>
                </div>
                <div class="terminal-container">
                    <div class="container">
                        <div id="terminal"></div>
                    </div>
                </div>
            </div>
            <div class="container" id="mode-buttons">
                <a class="mode-button purple-button-link" id="btn-mode-editor">Editor</a>
                <a class="mode-button purple-button-link active" id="btn-mode-serial">Serial</a>
            </div>
        </div>
        <div 
            class="popup-modal shadow" 
            data-popup-modal="files">
            <span id="current-path"></span>
            <i class="fas fa-2x fa-times text-white bg-primary p-3 popup-modal__close"></i>
            <div id="file-list" style="border:1px solid #888"></div>
            <div class="buttons">
                <input type=text" id="filename" />
                <button class="ok-button">Ok</button>
                <button class="cancel-button">Cancel</button>
            </div>
    </div>
        <div 
            class="popup-modal shadow" 
            data-popup-modal="save-dialog">
            <button class="ok-button">Save</button>
            <button class="not-ok-button">Don't Save</button>
            <button class="cancel-button">Cancel</button>
        </div>
        <script src="assets/js/hterm_all.js"></script>
        <script src="assets/js/file_dialog.js"></script>
        <script src="assets/js/header_mobile.js"></script>
        <script type="module" src="assets/js/script.js"></script>
    </body>
</html>